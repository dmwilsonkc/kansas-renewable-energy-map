<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kansas Renewable Energy Moratoriums Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #f5f5f5;
        }
        
        #header {
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }
        
        #header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }
        
        #header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        #map-container {
            display: flex;
            height: calc(100vh - 100px);
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            gap: 20px;
        }
        
        #map {
            flex: 1;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            z-index: 1;
        }
        
        #legend {
            width: 300px;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            overflow-y: auto;
        }
        
        #legend h3 {
            margin-bottom: 15px;
            color: #1e3c72;
            font-size: 1.3em;
        }
        
        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 12px;
            font-size: 0.95em;
        }
        
        .legend-color {
            width: 30px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
            border: 1px solid #ccc;
        }
        
        .stats {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
        }
        
        .stat-item {
            margin-bottom: 10px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 4px;
        }
        
        .stat-item strong {
            color: #1e3c72;
        }
        
        .leaflet-popup-content {
            margin: 15px;
            min-width: 250px;
        }
        
        .popup-title {
            font-size: 1.3em;
            font-weight: bold;
            color: #1e3c72;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid #667eea;
        }
        
        .popup-section {
            margin: 10px 0;
        }
        
        .popup-label {
            font-weight: 600;
            color: #555;
            display: block;
            margin-bottom: 3px;
        }
        
        .popup-value {
            color: #333;
            margin-bottom: 8px;
        }
        
        .popup-link {
            display: inline-block;
            margin-top: 10px;
            padding: 6px 12px;
            background: #667eea;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            font-size: 0.9em;
        }
        
        .popup-link:hover {
            background: #5568d3;
        }
        
        .status-active {
            color: #d32f2f;
            font-weight: bold;
        }
        
        .status-expired {
            color: #f57c00;
        }
        
        .status-none {
            color: #388e3c;
        }
        
        @media (max-width: 968px) {
            #map-container {
                flex-direction: column;
                height: auto;
            }
            
            #map {
                height: 500px;
            }
            
            #legend {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="header">
        <h1>Kansas Renewable Energy Moratoriums</h1>
        <p>Interactive Map of Wind and Solar Development Restrictions</p>
    </div>
    
    <div id="map-container">
        <div id="map"></div>
        <div id="legend">
            <h3>Legend</h3>
            <div class="legend-item">
                <div class="legend-color" style="background: #c62828;"></div>
                <span>Permanent Ban</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #d32f2f;"></div>
                <span>Active Moratorium (Both)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #e53935;"></div>
                <span>Active Moratorium (Wind or Solar)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #f57c00;"></div>
                <span>State Protection (Tallgrass)</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #ffa726;"></div>
                <span>Expired Moratorium</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #66bb6a;"></div>
                <span>No Restrictions</span>
            </div>
            <div class="legend-item">
                <div class="legend-color" style="background: #bdbdbd;"></div>
                <span>Insufficient Data</span>
            </div>
            
            <div class="stats">
                <h3 style="font-size: 1.1em; margin-bottom: 10px;">Key Statistics</h3>
                <div class="stat-item">
                    <strong>35</strong> counties with moratoriums/bans
                </div>
                <div class="stat-item">
                    <strong>15</strong> active moratoriums
                </div>
                <div class="stat-item">
                    <strong>6</strong> permanent bans
                </div>
                <div class="stat-item">
                    <strong>12</strong> Flint Hills counties with state protection
                </div>
            </div>
            
            <div style="margin-top: 20px; padding-top: 15px; border-top: 1px solid #e0e0e0; font-size: 0.85em; color: #666;">
                <p><strong>How to use:</strong> Click any county for detailed information about moratoriums, dates, and source links.</p>
            </div>
        </div>
    </div>

    <script>
        // Initialize the map centered on Kansas
        const map = L.map('map').setView([38.5, -98.5], 7);

        // Add tile layer
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '© OpenStreetMap contributors',
            maxZoom: 10,
            minZoom: 6
        }).addTo(map);

        // County data with moratorium information
        const countyData = {
            'Allen': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.allencounty.org', status: 'none' },
            'Anderson': { wind: 'No', windDates: 'N/A', solar: 'Yes - Active', solarDates: 'Aug 2023 - ongoing', source: 'https://kofo.com/2024/09/10/anco-extend-moratorium-on-solar/', status: 'active-partial' },
            'Atchison': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://farmerpublishing.com', status: 'none' },
            'Barber': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.change.org', status: 'none' },
            'Barton': { wind: 'No', windDates: 'N/A', solar: 'Expired', solarDates: 'Spring 2023 - March 2024', source: 'https://kansasreflector.com', status: 'expired' },
            'Bourbon': { wind: 'No', windDates: 'N/A', solar: 'Yes - Active (4-year)', solarDates: 'Jan 13, 2025 - Jan 13, 2029', source: 'https://fortscott.biz/news/new-commission-voted-for-four-year-moratorium-on-solar', status: 'active-partial' },
            'Brown': { wind: 'De facto ban', windDates: 'Jan 13, 2025', solar: 'No', solarDates: 'N/A', source: 'https://www.hiawathaworldonline.com', status: 'ban' },
            'Butler': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'No', solarDates: 'N/A', source: 'https://www.ksn.com', status: 'state' },
            'Chase': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'No', solarDates: 'N/A', source: 'https://www.wibw.com', status: 'state' },
            'Chautauqua': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Cherokee': { wind: 'Expired', windDates: 'Aug 2021 - Aug 2022', solar: 'No', solarDates: 'N/A', source: 'https://www.joplinglobe.com', status: 'expired' },
            'Cheyenne': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Clark': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Clay': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.claycountykansas.org', status: 'none' },
            'Cloud': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.ncktoday.com', status: 'none' },
            'Coffey': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'No', solarDates: 'N/A', source: 'https://www.coffeycountyks.org', status: 'state' },
            'Comanche': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Cowley': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.rd.usda.gov', status: 'none' },
            'Crawford': { wind: 'Yes - Active', windDates: 'Current - Dec 31, 2025', solar: 'Yes - Active', solarDates: 'Current - Dec 31, 2025', source: 'https://citizenportal.ai/articles/2984591', status: 'active-both' },
            'Decatur': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Dickinson': { wind: 'No (overturned)', windDates: 'Proposed Oct 2024, overturned Nov 21, 2024', solar: 'No', solarDates: 'N/A', source: 'https://www.kwch.com', status: 'none' },
            'Doniphan': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://dpcountyks.com', status: 'none' },
            'Douglas': { wind: 'De facto ban', windDates: 'April 2024', solar: 'No', solarDates: 'N/A', source: 'https://www.kcur.org', status: 'ban' },
            'Edwards': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Elk': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.gem.wiki', status: 'none' },
            'Ellis': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.wind-watch.org', status: 'none' },
            'Ellsworth': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.power-technology.com', status: 'none' },
            'Finney': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.kfb.org', status: 'none' },
            'Ford': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.nexteraenergyresources.com', status: 'none' },
            'Franklin': { wind: 'De facto ban', windDates: 'Feb 8, 2023', solar: 'Under consideration', solarDates: 'April 2025 discussions', source: 'https://garnett-ks.com', status: 'ban' },
            'Geary': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'Insufficient data', solarDates: 'N/A', source: 'https://kansasreflector.com', status: 'state' },
            'Gove': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Graham': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Grant': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Gray': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Greeley': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Greenwood': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'Insufficient data', solarDates: 'N/A', source: 'https://windexchange.energy.gov', status: 'state' },
            'Hamilton': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Harper': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Harvey': { wind: 'Permanent ban', windDates: 'Nov 14, 2023 - ongoing', solar: 'Permanent ban', solarDates: 'Nov 14, 2023 - ongoing', source: 'https://www.harveycounty.com', status: 'ban' },
            'Haskell': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Hodgeman': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.power-technology.com', status: 'none' },
            'Jackson': { wind: 'Yes - Active (2 years)', windDates: 'Jan 17, 2024 - Jan 17, 2026', solar: 'No', solarDates: 'N/A', source: 'https://www.holtonrecorder.net', status: 'active-partial' },
            'Jefferson': { wind: 'Yes - Active', windDates: '2023 (Resolution 2023-001)', solar: 'Yes - Active', solarDates: '2023 (Resolution 2023-001)', source: 'https://www.jfcountyks.com', status: 'active-both' },
            'Jewell': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Johnson': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.jocogov.org', status: 'none' },
            'Kearny': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.kearnycountykansas.com', status: 'none' },
            'Kingman': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://centerforlocalpolicy.org', status: 'none' },
            'Kiowa': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Labette': { wind: 'Expired', windDates: 'Extended Nov 2020 - early 2021', solar: 'No', solarDates: 'N/A', source: 'https://www.wind-watch.org', status: 'expired' },
            'Lane': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Leavenworth': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://files.leavenworthcounty.gov', status: 'none' },
            'Lincoln': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'State (Tallgrass)', solarDates: '2004-present', source: 'https://www.wibw.com', status: 'state' },
            'Linn': { wind: 'No', windDates: 'N/A', solar: 'Expired', solarDates: 'Nov 20, 2023 - Nov 20, 2024', source: 'https://www.linncountyjournal.com', status: 'expired' },
            'Logan': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Lyon': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'No', solarDates: 'N/A', source: 'https://findenergy.com', status: 'state' },
            'Marion': { wind: 'Excluded from state moratorium', windDates: 'Active wind farms', solar: 'No', solarDates: 'N/A', source: 'https://www.prnewswire.com', status: 'none' },
            'Marshall': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://kansasreflector.com', status: 'none' },
            'McPherson': { wind: 'Yes - Active', windDates: 'Nov 11, 2024 - ongoing', solar: 'Yes - Active', solarDates: 'Nov 11, 2024 - ongoing', source: 'https://citizenportal.ai/articles/2380269', status: 'active-both' },
            'Meade': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.meadecounty.org', status: 'none' },
            'Miami': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://centerforlocalpolicy.org', status: 'none' },
            'Mitchell': { wind: 'Yes - Active (12 months)', windDates: 'July 8, 2024 - July 2025', solar: 'Yes - Likely included', solarDates: 'July 8, 2024 - July 2025', source: 'https://kvsvradio.com', status: 'active-both' },
            'Montgomery': { wind: 'Not a Kansas county', windDates: 'N/A', solar: 'Not a Kansas county', solarDates: 'N/A', source: '', status: 'none' },
            'Morris': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'No', solarDates: 'N/A', source: 'https://www.morriscountyks.org', status: 'state' },
            'Morton': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Nemaha': { wind: 'Yes - Active', windDates: 'May 13, 2019 - extended through Oct 2024', solar: 'No', solarDates: 'N/A', source: 'https://www.wind-watch.org', status: 'active-partial' },
            'Neosho': { wind: 'Yes - Ongoing/indefinite', windDates: 'Sep 2019 - ongoing', solar: 'No', solarDates: 'N/A', source: 'https://www.wind-watch.org', status: 'active-partial' },
            'Ness': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Norton': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: '', status: 'none' },
            'Osage': { wind: 'Yes - Active (25-year)', windDates: 'Jan 30, 2025 - Dec 31, 2049', solar: 'Yes - Active (25-year)', solarDates: 'Jan 30, 2025 - Dec 31, 2049', source: 'https://citizenportal.ai/articles/2629157', status: 'active-both' },
            'Osborne': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.rollingprairiewind.com', status: 'none' },
            'Ottawa': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Pawnee': { wind: 'Yes - Active (12 months)', windDates: 'March 4, 2025 - March 4, 2026', solar: 'Yes - Active (12 months)', solarDates: 'March 4, 2025 - March 4, 2026', source: 'https://www.mscnews.net', status: 'active-both' },
            'Phillips': { wind: 'Yes', windDates: 'As of 2022, dates unclear', solar: 'Yes', solarDates: 'As of 2022, dates unclear', source: 'https://coloradosun.com', status: 'active-both' },
            'Pottawatomie': { wind: 'State (Tallgrass)', windDates: '2004-present', solar: 'Yes - Active (3-year)', solarDates: 'Nov 27, 2023 - Nov 27, 2026', source: 'https://www.pottcounty.org', status: 'state' },
            'Pratt': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.prattcounty.org', status: 'none' },
            'Rawlins': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Reno': { wind: 'Permanent ban (zoned areas)', windDates: 'Dec 14, 2021 - ongoing', solar: 'Lifted', solarDates: 'Lifted March 26, 2025', source: 'https://www.adastraradio.com', status: 'ban' },
            'Republic': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'http://republiccounty.org', status: 'none' },
            'Rice': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Riley': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.ksnt.com', status: 'none' },
            'Rooks': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Rush': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Russell': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://sunflower.net', status: 'none' },
            'Saline': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.salinecountyks.gov', status: 'none' },
            'Scott': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Sedgwick': { wind: 'Permanent ban', windDates: 'Aug 21, 2019 - ongoing', solar: 'Multiple moratoriums', solarDates: 'Various dates through March 2024', source: 'https://www.sedgwickcounty.org', status: 'ban' },
            'Seward': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.kfb.org', status: 'none' },
            'Shawnee': { wind: 'Permanent ban', windDates: 'May 2024 - ongoing', solar: 'Yes - Active (1-year)', solarDates: 'May 2024 - May 2025', source: 'https://kaninfo.com', status: 'ban' },
            'Sheridan': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Sherman': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Smith': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Stafford': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Stanton': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.mcgrawcenter.org', status: 'none' },
            'Stevens': { wind: 'Under discussion', windDates: 'Dec 11, 2023 discussion', solar: 'Under discussion', solarDates: 'Dec 11, 2023 discussion', source: 'https://stevenscoks.org', status: 'none' },
            'Sumner': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Thomas': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Trego': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Wabaunsee': { wind: 'Permanent ban + State', windDates: 'County ban + 2004-present (state)', solar: 'No', solarDates: 'N/A', source: 'https://www.babstcalland.com', status: 'ban' },
            'Wallace': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Washington': { wind: 'Expired', windDates: 'Extended to Aug 31, 2021', solar: 'Expired', solarDates: 'Extended to Aug 31, 2021', source: 'https://www.wind-watch.org', status: 'expired' },
            'Wichita': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://findenergy.com', status: 'none' },
            'Wilson': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Woodson': { wind: 'Insufficient data', windDates: 'N/A', solar: 'Insufficient data', solarDates: 'N/A', source: '', status: 'insufficient' },
            'Wyandotte': { wind: 'No', windDates: 'N/A', solar: 'No', solarDates: 'N/A', source: 'https://www.kshb.com', status: 'none' }
        };

        // Function to get color based on status
        function getColor(status) {
            switch(status) {
                case 'ban': return '#c62828';
                case 'active-both': return '#d32f2f';
                case 'active-partial': return '#e53935';
                case 'state': return '#f57c00';
                case 'expired': return '#ffa726';
                case 'none': return '#66bb6a';
                case 'insufficient': return '#bdbdbd';
                default: return '#bdbdbd';
            }
        }

        // Load Kansas county GeoJSON and add to map
        fetch('https://raw.githubusercontent.com/plotly/datasets/master/geojson-counties-fips.json')
            .then(response => response.json())
            .then(data => {
                // Filter for Kansas counties (FIPS code starting with 20)
                const kansasCounties = {
                    type: 'FeatureCollection',
                    features: data.features.filter(f => f.id.startsWith('20'))
                };

                L.geoJSON(kansasCounties, {
                    style: function(feature) {
                        // Extract county name from properties
                        const countyName = feature.properties.NAME || feature.properties.name;
                        const data = countyData[countyName];
                        const color = data ? getColor(data.status) : '#bdbdbd';
                        
                        return {
                            fillColor: color,
                            weight: 2,
                            opacity: 1,
                            color: 'white',
                            fillOpacity: 0.7
                        };
                    },
                    onEachFeature: function(feature, layer) {
                        const countyName = feature.properties.NAME || feature.properties.name;
                        const data = countyData[countyName];
                        
                        if (data) {
                            // Hover effect
                            layer.on({
                                mouseover: function(e) {
                                    const layer = e.target;
                                    layer.setStyle({
                                        weight: 3,
                                        color: '#666',
                                        fillOpacity: 0.9
                                    });
                                },
                                mouseout: function(e) {
                                    const layer = e.target;
                                    layer.setStyle({
                                        weight: 2,
                                        color: 'white',
                                        fillOpacity: 0.7
                                    });
                                }
                            });

                            // Create popup content
                            const popupContent = `
                                <div class="popup-title">${countyName} County</div>
                                <div class="popup-section">
                                    <span class="popup-label">Wind Moratorium:</span>
                                    <div class="popup-value ${data.wind.includes('Yes') || data.wind.includes('ban') ? 'status-active' : data.wind.includes('Expired') ? 'status-expired' : 'status-none'}">${data.wind}</div>
                                    <div style="font-size: 0.9em; color: #666;">${data.windDates}</div>
                                </div>
                                <div class="popup-section">
                                    <span class="popup-label">Solar Moratorium:</span>
                                    <div class="popup-value ${data.solar.includes('Yes') || data.solar.includes('ban') ? 'status-active' : data.solar.includes('Expired') ? 'status-expired' : 'status-none'}">${data.solar}</div>
                                    <div style="font-size: 0.9em; color: #666;">${data.solarDates}</div>
                                </div>
                                ${data.source ? `<a href="${data.source}" target="_blank" class="popup-link">View Source →</a>` : ''}
                            `;

                            layer.bindPopup(popupContent);
                        }
                    }
                }).addTo(map);
            })
            .catch(error => {
                console.error('Error loading GeoJSON:', error);
                alert('Unable to load county boundary data. Please check your internet connection.');
            });
    </script>
</body>
</html>